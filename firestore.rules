rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Overall ranking document (public read)
    match /leaderboards_overall/main {
      allow read: if true;
      allow write: if false;
    }

    // Per-track boards (public read)
    match /leaderboards_tracks/{trackId} {
      allow read: if true;
      allow write: if false;
    }

    // Published tracks list (public read)
    match /tracks_catalog/{trackId} {
      allow read: if true;
      allow write: if false;
    }

    // Raw race result archive (disabled from public clients)
    match /race_results/{resultId} {
      allow read, write: if false;
    }

    // Default deny-all
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
